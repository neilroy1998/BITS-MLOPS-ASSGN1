schema: '2.0'
stages:
  preprocess:
    cmd: python src/pipelines/preprocess_runner.py
    deps:
    - path: data/raw/california_housing.csv
      hash: md5
      md5: f8bdb05b7e90d6fef7a4c6d782578b91
      size: 3330462
    - path: src/data/preprocess_03.py
      hash: md5
      md5: 407285d1e59bff465ab67d1db4e4ef7f
      size: 1827
    - path: src/pipelines/preprocess_runner.py
      hash: md5
      md5: 27c4a630b08b5a61196381cf385c91f9
      size: 873
    outs:
    - path: data/processed
      hash: md5
      md5: efade49d256604041d102108607b7baf.dir
      size: 1103694
      nfiles: 2
  train_model:
    cmd: python src/models/train_multiple_models.py
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 91d76b52919a09d7ace25ab748a7c53e
      size: 213752
    - path: data/processed/train.parquet
      hash: md5
      md5: f7c85a68c823aadd5a9cb05fd6928f4b
      size: 712143
    - path: src/models/train_multiple_models.py
      hash: md5
      md5: 38ac010cab9ccd8744bffbad80a45864
      size: 3736
    outs:
    - path: mlruns
      hash: md5
      md5: d2167c9dae005d92bc37cc1bbd946d30.dir
      size: 9233
      nfiles: 195
  train:
    cmd: "python src/models/train_multiple_models.py && echo \"Training complete on
      $(date)\" > logs/train_receipt.txt\n"
    deps:
    - path: data/processed
      hash: md5
      md5: efade49d256604041d102108607b7baf.dir
      size: 1103694
      nfiles: 2
    - path: src/models/train_multiple_models.py
      hash: md5
      md5: dae5f591cd0fa6e0e900f8ba76f622b2
      size: 1801
    outs:
    - path: logs/train_receipt.txt
      hash: md5
      md5: 2af6e92e8f9ffc9294ac05d054471820
      size: 50
  register:
    cmd: "MLFLOW_TRACKING_URI=http://localhost:5002  python src/models/register_best_model.py\n"
    deps:
    - path: logs/train_receipt.txt
      hash: md5
      md5: 2af6e92e8f9ffc9294ac05d054471820
      size: 50
    - path: src/models/register_best_model.py
      hash: md5
      md5: 27449041a2d0930899b3bbaa60ea5c57
      size: 1990
