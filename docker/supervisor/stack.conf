[program:mlflow]
command=/bin/sh -lc 'uv run mlflow server --host 0.0.0.0 --port ${MLFLOW_PORT} --backend-store-uri sqlite:////data/mlflow.db --serve-artifacts --artifacts-destination /data/mlartifacts'
priority=10
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:api]
command=/bin/sh -lc 'uv run uvicorn api.main:app --host 0.0.0.0 --port 8000'
priority=20
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:prometheus]
command=/opt/prometheus/prometheus --config.file=/etc/prometheus/prometheus.yml --web.enable-lifecycle --storage.tsdb.path=/data/prom
priority=30
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

[program:grafana]
command=/opt/grafana/bin/grafana-server --homepath=/opt/grafana --config=/etc/grafana/grafana.ini
priority=40
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
